#!/usr/bin/env bash

buildpack_fpm_dir=$(cd "$(dirname $0)/../../"; pwd)
fpm_bundle_path=$buildpack_fpm_dir/bundle

if [ -d "$fpm_bundle_path" ]; then
    export FURY_BUILDPACK_FPM_VENDOR="$fpm_bundle_path"

    packguy_ruby=$(cd "$(dirname $0)"; pwd)/packguy_vendor_ruby
    fpm_ruby=$(cd "$(dirname $0)"; pwd)/fpm_vendor_ruby
else
    packguy_ruby="$(which packguy)"
    fpm_ruby="$(which fpm)"
fi

export FPM_EXEC_PATH="$fpm_ruby"

echo "Using packguy    : $packguy_ruby"
$packguy_ruby "$@"
